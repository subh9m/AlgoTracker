@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    /* Define light mode defaults FIRST */
    @apply bg-white text-gray-900 transition-colors duration-300;
    /* Apply dark mode overrides */
    @apply dark:bg-black dark:text-gray-100;
  }
}

html {
  transition: background-color 0.3s ease, color 0.3s ease;
  /* The useTheme hook adds the 'dark' class here */
}

@layer components {
  /*
 |--------------------------------------------------------------------------
 | Modal Styles
 |--------------------------------------------------------------------------
 */
  .modal-backdrop {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-gray-900/70 dark:bg-black/80 backdrop-blur-md transition-all duration-300 ease-in-out;
  }

  .modal-content {
    @apply bg-white dark:backdrop-blur-lg border border-gray-200 dark:border-[#333] 
    rounded-2xl shadow-2xl w-[95%] md:w-[85%] lg:w-[75%] max-w-[90rem] max-h-[90vh] 
    flex flex-col m-auto;

    /* Apply dark background gradient */
    @apply dark:bg-gradient-to-b dark:from-[rgba(12,12,12,0.95)] dark:to-[rgba(18,18,18,0.9)];
  }

  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200 dark:border-[#333];
  }

  .modal-title {
    @apply text-2xl font-semibold text-gray-900 dark:text-white tracking-wider;
  }

  .modal-close-btn {
    @apply text-gray-500 hover:text-gray-900 dark:text-gray-400 text-3xl font-light dark:hover:text-white transition-colors duration-300;
  }

  .modal-body {
    @apply p-6 overflow-y-auto;
  }

  /*
 |--------------------------------------------------------------------------
 | Form Styles
 |--------------------------------------------------------------------------
 */
  .form-label {
    @apply block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2 tracking-wider uppercase;
  }

  .form-input,
  .form-textarea,
  .form-select {
    @apply w-full bg-white dark:bg-[#0e0e0e]/80 border border-gray-300 dark:border-[#333] 
            text-gray-900 dark:text-gray-100 rounded-lg p-3
            focus:border-red-500 focus:ring-1 focus:ring-red-500 dark:focus:shadow-[0_0_10px_rgba(255,0,0,0.25)] 
            transition-all duration-300 placeholder-gray-400 dark:placeholder-gray-600;
  }

  .form-textarea {
    /* Most styles are covered above. These are overrides. */
    @apply bg-white dark:bg-transparent;
    resize: none; /* prevent manual drag resize */
    overflow: hidden; /* hide scrollbar */
    min-height: 2.5rem; /* start small */
  }

  /*
 |--------------------------------------------------------------------------
 | Button Styles
 |--------------------------------------------------------------------------
 */
  .save-btn {
    @apply border border-red-500 text-red-500 px-5 py-2 rounded-xl 
            hover:bg-red-500 hover:text-white dark:hover:text-black hover:shadow-[0_0_20px_rgba(255,0,0,0.4)] 
            transition-all duration-300 ease-in-out;
  }

  .cancel-btn {
    @apply text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white px-5 py-2 rounded-xl 
            transition-colors duration-300;
  }

  /*
 |--------------------------------------------------------------------------
 | Code Editor (Editable Code via react-simple-code-editor)
 |--------------------------------------------------------------------------
 */
  .prism-editor-wrapper {
    /* --- Light Mode --- */
    @apply bg-gray-50 border border-gray-300 text-gray-900;

    /* --- Dark Mode --- */
    @apply dark:bg-gradient-to-b dark:from-[#1a1a1a] dark:to-[#101010] 
            dark:border-[#333] dark:text-[#d4d4d4]
            dark:shadow-[inset_0_0_10px_rgba(255,0,0,0.05)];

    border-radius: 0.75rem;
    font-family: "IBM Plex Mono", monospace !important;
    caret-color: #ff5555; /* Red cursor for vibe */
    padding: 1rem;
  }

  .prism-editor-wrapper textarea,
  .prism-editor-wrapper pre {
    font-family: "IBM Plex Mono", monospace !important;
    font-size: 0.9rem;
    line-height: 1.5rem;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }

  /*
 |--------------------------------------------------------------------------
 | LIGHT MODE Syntax Colors (for editable editor)
 | (Based on PrismJS default light theme)
 |--------------------------------------------------------------------------
 */
  .token.comment,
  .token.prolog,
  .token.doctype,
  .token.cdata {
    color: slategray;
  }

  .token.punctuation {
    color: #999;
  }

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
  }

  .token.selector,
  .token.attr-name,
  .token.string,
  .token.char,
  .token.inserted {
    color: #690;
  }

  .token.atrule,
  .token.attr-value,
  .token.keyword {
    color: #07a;
  }

  .token.function,
  .token.class-name {
    color: #dd4a68;
  }

  .token.regex,
  .token.important,
  .token.variable {
    color: #e90;
  }

  .token.operator {
    color: #a67f59;
  }

  .token.parameter {
    color: #008000;
    font-style: italic;
  }

  .token.builtin {
    color: #0077aa;
  }

  /*
 |--------------------------------------------------------------------------
 | DARK MODE Syntax Colors (for editable editor)
 | Your original styles, now wrapped in .dark
 |--------------------------------------------------------------------------
 */
  .dark .token.comment,
  .dark .token.prolog,
  .dark .token.doctype,
  .dark .token.cdata {
    color: #6a9955 !important; /* green comments */
    font-style: italic;
  }

  .dark .token.punctuation {
    color: #c5c5c5 !important;
  }

  .dark .token.property,
  .dark .token.tag,
  .dark .token.boolean,
  .dark .token.number,
  .dark .token.constant,
  .dark .token.symbol,
  .dark .token.deleted {
    color: #b5cea8 !important; /* soft mint */
  }

  .dark .token.selector,
  .dark .token.attr-name,
  .dark .token.string,
  .dark .token.char,
  .dark .token.inserted {
    color: #ce9178 !important; /* peach for strings */
  }

  .dark .token.atrule,
  .dark .token.attr-value,
  .dark .token.keyword {
    color: #c586c0 !important; /* pink/purple for keywords */
  }

  .dark .token.function,
  .dark .token.class-name {
    color: #4fc1ff !important; /* bright cyan-blue */
  }

  .dark .token.regex,
  .dark .token.important,
  .dark .token.variable {
    color: #9cdcfe !important; /* light sky blue */
  }

  .dark .token.operator {
    color: #d4d4d4 !important;
  }

  .dark .token.parameter {
    color: #9cdcfe !important;
    font-style: italic;
  }

  .dark .token.builtin {
    color: #569cd6 !important; /* deep blue for builtins */
  }

  /* Glow effect for active typing area in the modal editor */
  .prism-editor-wrapper:focus-within {
    /* Light mode focus */
    @apply border-red-500 ring-1 ring-red-500;
    /* Dark mode focus */
    @apply dark:shadow-[0_0_12px_rgba(255,0,0,0.3)] dark:border-[rgba(255,0,0,0.4)];
  }

  /* Slightly more readable code contrast */
  .dark .prism-editor-wrapper pre {
    filter: brightness(1.05);
  }

  /*
 |--------------------------------------------------------------------------
 | Fade-in Animation
 |--------------------------------------------------------------------------
 */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.6s ease-out forwards;
  }
}

/* Makes the read-only code editor look disabled */
.prism-editor-readonly {
  background-color: #f3f4f6; /* light gray */
  cursor: not-allowed;
  opacity: 0.8;
}

/* Dark mode style for read-only editor */
.dark .prism-editor-readonly {
  background-color: #1f2937; /* dark gray */
}


/* --- TOGGLE SWITCH STYLES --- */
.toggle-switch-control {
  display: flex;
  align-items: center;
  cursor: pointer;
  gap: 10px;
}

.toggle-switch-label {
  font-size: 0.875rem; /* 14px */
  font-weight: 500;
  color: #374151; /* gray-700 */
}
.dark .toggle-switch-label {
  color: #d1d5db; /* gray-300 */
}

.toggle-switch-checkbox {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-switch-slider {
  position: relative;
  display: block;
  width: 40px;
  height: 22px;
  background-color: #ccc;
  border-radius: 34px;
  transition: 0.4s;
}
.dark .toggle-switch-slider {
  background-color: #374151; /* gray-700 */
}

.toggle-switch-slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  border-radius: 50%;
  transition: 0.4s;
}

.toggle-switch-checkbox:checked + .toggle-switch-slider {
  background-color: #ef4444; /* red-500 */
}

.toggle-switch-checkbox:checked + .toggle-switch-slider:before {
  transform: translateX(18px);
}
/* --- END TOGGLE SWITCH --- */

/* --- READ-ONLY EDITOR STYLE --- */
/* Makes the read-only code editor look disabled */
.prism-editor-readonly {
  background-color: #f3f4f6; /* gray-100 */
  cursor: not-allowed;
  opacity: 0.8;
}

/* Dark mode style for read-only editor */
.dark .prism-editor-readonly {
  background-color: #1f2937; /* gray-800 */
}

/* --- TOGGLE SWITCH STYLES --- */
.toggle-switch-control {
  display: flex;
  align-items: center;
  cursor: pointer;
  gap: 10px;
}

.toggle-switch-label {
  font-size: 0.875rem; /* 14px */
  font-weight: 500;
  color: #374151; /* gray-700 */
  transition: color 0.3s;
}
.dark .toggle-switch-label {
  color: #d1d5db; /* gray-300 */
}
/* NEW: Hover for toggle label */
.toggle-switch-control:hover .toggle-switch-label {
  color: #ef4444; /* red-500 */
}
.dark .toggle-switch-control:hover .toggle-switch-label {
  color: #f87171; /* red-400 */
}


.toggle-switch-checkbox {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-switch-slider {
  position: relative;
  display: block;
  width: 40px;
  height: 22px;
  background-color: #ccc;
  border-radius: 34px;
  transition: 0.4s;
}
.dark .toggle-switch-slider {
  background-color: #374151; /* gray-700 */
}

.toggle-switch-slider:before {
  position: absolute;
  content: "";
  height: 16px;
  width: 16px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  border-radius: 50%;
  transition: 0.4s;
}

.toggle-switch-checkbox:checked + .toggle-switch-slider {
  background-color: #ef4444; /* red-500 */
}

.toggle-switch-checkbox:checked + .toggle-switch-slider:before {
  transform: translateX(18px);
}
/* --- END TOGGLE SWITCH --- */

/* --- READ-ONLY EDITOR STYLE --- */
.prism-editor-readonly {
  background-color: #f3f4f6; /* gray-100 */
  cursor: not-allowed;
  opacity: 0.8;
  transition: background-color 0.3s;
}
.dark .prism-editor-readonly {
  background-color: #1f2937; /* gray-800 */
}

/* NEW: Hover state for read-only editor */
.prism-editor-readonly:hover {
  background-color: #f9fafb; /* gray-50 */
}
.dark .prism-editor-readonly:hover {
  background-color: #374151; /* gray-700 */
}